<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TCP Money Manager — TSAREVSKY CAPITAL PARTNERS</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">

    <!-- AUTH OVERLAY (PIN setup / login) -->
    <div id="authOverlay" class="overlay">
      <div class="auth-card">
        <img src="logo.png" alt="TCP" class="auth-logo" onerror="this.style.display='none'">
        <h2>TSAREVSKY CAPITAL PARTNERS</h2>
        <p id="auth-sub">Введіть 4-значний PIN для доступу</p>

        <div id="setupBlock" class="auth-section">
          <input id="setupPin" type="password" inputmode="numeric" maxlength="6" placeholder="Новий PIN (4 цифри)">
          <button id="setupSave" class="btn primary">Створити PIN</button>
        </div>

        <div id="loginBlock" class="auth-section hidden">
          <input id="loginPin" type="password" inputmode="numeric" maxlength="6" placeholder="Введіть PIN">
          <button id="loginBtn" class="btn primary">Увійти</button>
          <p id="authError" class="auth-error"></p>
          <button id="authUsePassword" class="btn ghost small hidden">Увійти паролем</button>
        </div>

        <small class="muted">Локальний доступ — дані зберігаються тільки у вашому браузері</small>
      </div>
    </div>

    <!-- APP LAYOUT -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo-wrap"><img src="logo.png" alt="TCP" onerror="this.style.display='none'"></div>
        <div class="brand-text">
          <div class="brand-full">TSAREVSKY CAPITAL PARTNERS</div>
          <div class="brand-short">TCP</div>
        </div>
      </div>

      <nav>
        <button class="nav-btn active" data-view="dashboard">Дашборд</button>
        <button class="nav-btn" data-view="transactions">Транзакції</button>
        <button class="nav-btn" data-view="accounts">Рахунки</button>
        <button class="nav-btn" data-view="settings">Налаштування</button>
      </nav>

      <div class="sidebar-foot">
        <button id="lockBtn" class="btn small">Вийти</button>
      </div>
    </aside>

    <main class="main">
      <header class="topbar">
        <div>
          <h1 class="title">TCP Finance</h1>
          <div class="subtitle">Персональний фінансовий кабінет</div>
        </div>

        <div class="controls">
          <input id="search" class="search" placeholder="Пошук транзакцій або опису..." />
          <button id="addTxQuick" class="btn success">+ Транзакція</button>
          <label class="theme-switch" title="Тема">
            <input id="themeToggle" type="checkbox"><span class="slider"></span>
          </label>
        </div>
      </header>

      <!-- VIEWS -->
      <section id="view-dashboard" class="view active">
        <div class="cards">
          <div class="card balance-card">
            <div class="card-head">Загальний баланс</div>
            <div id="totalBalance" class="big-num">0.00 UAH</div>
            <div id="breakdown" class="muted small"></div>
          </div>

          <div class="card small-card">
            <div class="card-head">Доходи (місяць)</div>
            <div id="monthIncome" class="metric">0.00</div>
          </div>

          <div class="card small-card">
            <div class="card-head">Витрати (місяць)</div>
            <div id="monthExpense" class="metric">0.00</div>
          </div>
        </div>

        <div class="grid">
          <div class="panel">
            <h3>Динаміка</h3>
            <canvas id="lineChart"></canvas>
          </div>
          <div class="panel">
            <h3>Категорії</h3>
            <canvas id="pieChart"></canvas>
          </div>
        </div>

        <div class="panel wide">
          <h3>Останні транзакції</h3>
          <table class="tx-table">
            <thead><tr><th>Дата</th><th>Рахунок</th><th>Категорія</th><th>Опис</th><th>Сума</th><th></th></tr></thead>
            <tbody id="txBody"></tbody>
          </table>
        </div>
      </section>

      <section id="view-transactions" class="view hidden">
        <div class="panel">
          <h3>Усі транзакції</h3>
          <div class="controls-row">
            <select id="filterAccount"><option value="">Всі рахунки</option></select>
            <input id="filterFrom" type="date">
            <input id="filterTo" type="date">
            <button id="filterApply" class="btn">Фільтрувати</button>
          </div>
          <table class="tx-table">
            <thead><tr><th>Дата</th><th>Рахунок</th><th>Категорія</th><th>Опис</th><th>Сума</th><th></th></tr></thead>
            <tbody id="txBodyAll"></tbody>
          </table>
        </div>
      </section>

      <section id="view-accounts" class="view hidden">
        <div class="panel">
          <h3>Рахунки</h3>
          <div class="controls-row">
            <input id="newAccountName" placeholder="Нова назва рахунку">
            <select id="newAccountCurrency"><option>UAH</option><option>USD</option><option>EUR</option></select>
            <button id="addAccountBtn" class="btn">Додати</button>
            <label class="file-label">Імпорт CSV<input id="importCsv" type="file" accept=".csv"></label>
            <button id="exportCsv" class="btn">Експорт CSV</button>
          </div>
          <ul id="accountsList" class="accounts-list"></ul>
        </div>
      </section>

      <section id="view-settings" class="view hidden">
        <div class="panel">
          <h3>Налаштування</h3>
          <button id="clearData" class="btn warn">Очистити локальні дані</button>
          <p class="muted">План: інтеграції з біржами, синхронізація в хмарі</p>
        </div>
      </section>

    </main>
  </div>

  <!-- MODAL: add/edit transaction -->
  <div id="modal" class="modal hidden" aria-hidden="true">
    <div class="modal-card">
      <h3 id="modalTitle">Додати транзакцію</h3>
      <form id="modalForm" class="form-vertical">
        <label>Дата <input id="mDate" type="date" required></label>
        <label>Рахунок
          <select id="mAccount"></select>
        </label>
        <label>Категорія <input id="mCategory" required></label>
        <label>Опис <input id="mDesc"></label>
        <label>Сума <input id="mAmount" type="number" step="0.01" required></label>
        <div class="modal-actions">
          <button type="button" id="modalCancel" class="btn">Скасувати</button>
          <button type="submit" class="btn primary">Зберегти</button>
        </div>
      </form>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
